// ==UserScript==
// @match https://mail.google.com/mail/u/1/*
// @match https://mail.google.com/mail/u/2/*
// ==/UserScript==

/**
 * @fileoverview A simple script that changes the Gmail favicon colours
 * if you're signed in with multiple accounts.
 *
 * @author Ben Komalo (benkomalo@gmail.com)
 */


var head = document.getElementsByTagName('head')[0]

// Remove existing favicons.
var links = head.getElementsByTagName('link');
for (var i = 0, link; link = links[i]; i++) {
    if (link.rel === 'shortcut icon' || links.rel === 'icon') {
        head.removeChild(link);
        i--;
    }
}

// If we're on /1/, use blue, if on /2/, use green.
var useGreen = window.location.href.indexOf('https://mail.google.com/mail/u/2/') === 0;

var blueData = 'data:image/x-icon;base64,AAABAAEAEBAAAAAAAABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAA//btAP+EAAD8+fUA////APy8dwD60qcA/Pz8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAgYGBgYGBgYGBgYGBgICAgIBAwMDAwMDAwMDAwECAgICBgEHBwQBAQQEBwEGAgICAgEGAQcBAgIBBwEGBAICAgIBBAYBAgICAgEGBAQCAgICAQQBAgICAgICAQQEAgICAgEBAgICAQECAgIBBAICAgIBAgICAQcEAQICAgECAgICAgICAQcEBAQBAgICAgICAgICAQcHBAQEBAECAgICAgICBQUFBQUFBQUFBQUCAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//AAD//wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAA//8AAP//AAA=';


var greenData = 'data:image/vnd.microsoft.icon;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhIQsLGB8gICAgICAeEgAAISELCx8YHSAgICAcDw4AACEhCwsgIBkbICAaDg4OAAAhIQsLICAgGxkXDg4ODgAAISELCyAgIBYNAggODg4AACEhCwsgIBUMCwsHBQ4OAAAhIQsLIBMLCwwMCwkEDgAAISELCxALCw0WFg0LCgMAACEhCwsLCxEgICAgEQsLAQAhIQsLDBQgICAgICAUDAsGISELDRYgICAgICAgIBYNCyEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhIf//AAD//wAA//8AAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAA//8AAP//AAA='

// Inject a shiny new one.
var newLink = document.createElement('link');
newLink.type = 'image/x-icon';
newLink.rel = 'shortcut icon';
newLink.href = useGreen ? greenData : blueData;
head.appendChild(newLink);
